/* empty css              */(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))I(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const S of d.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&I(S)}).observe(document,{childList:!0,subtree:!0});function p(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function I(r){if(r.ep)return;r.ep=!0;const d=p(r);fetch(r.href,d)}})();document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".header-logo").forEach(p=>{p.addEventListener("error",function(){this.style.display="none"})});const s=document.getElementById("mainApp");s&&s.style.display});function xe(){const u=[30.9753,41.0389],s=new google.maps.Map(document.getElementById("map"),{center:{lat:u[0],lng:u[1]},zoom:13,minZoom:8,maxZoom:20,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_LEFT,mapTypeIds:["roadmap","satellite","hybrid"]},zoomControl:!0,streetViewControl:!1,fullscreenControl:!1,gestureHandling:"greedy"});window.investmentMap=s,window.ARAR_CENTER=u;let p=null,I=null,r={district:"all",activity:"all",projectType:"all",minArea:null,maxArea:null,within2026:!1};const d=document.getElementById("districtSelect"),S=document.getElementById("activitySelect"),w=document.getElementById("within2026Check"),U=document.getElementById("typeSelect"),E=document.querySelector('.segmented[aria-label="project type"]'),b=document.getElementById("areaMinRange"),v=document.getElementById("areaMaxRange"),ee=document.getElementById("areaMinVal"),te=document.getElementById("areaMaxVal"),Be=document.getElementById("applyFilters"),Ue=document.getElementById("resetFilters"),ne=document.getElementById("quickStatTotal"),oe=document.getElementById("quickStat2026"),ie=document.getElementById("quickStatLeasing"),ae=document.getElementById("quickStatSeasonal"),se=document.getElementById("statFilteredCount"),le=document.getElementById("statFilteredGrantProject"),re=document.getElementById("statFilteredMediumProject"),W=document.getElementById("infoTitle"),A=document.getElementById("infoPlotNumber"),x=document.getElementById("infoPlanNumber"),F=document.getElementById("infoDistrict"),P=document.getElementById("infoArea"),N=document.getElementById("infoImages"),j=document.getElementById("imageViewer"),T=document.getElementById("viewerImg"),Pe=Array.from(new Set(PLOTS_GEOJSON.features.map(e=>e.properties.district))).sort();for(const e of Pe){const o=document.createElement("option");o.value=e,o.textContent=e,d.appendChild(o)}const Te=Array.from(new Set(PLOTS_GEOJSON.features.map(e=>e.properties.activity))).sort();for(const e of Te){const o=document.createElement("option");o.value=e,o.textContent=e,S.appendChild(o)}const L=document.getElementById("leasingActivitySelect"),D=document.getElementById("leasingDistrictSelect");if(L&&D){const e=PLOTS_GEOJSON.features.filter(t=>t.type==="Temporary_Leasing"),o=Array.from(new Set(e.map(t=>t.properties.activity))).filter(Boolean).sort();for(;L.options.length>1;)L.remove(1);for(const t of o){const i=document.createElement("option");i.value=t,i.textContent=t,L.appendChild(i)}const n=Array.from(new Set(e.map(t=>t.properties.district))).sort();for(const t of n){const i=document.createElement("option");i.value=t,i.textContent=t,D.appendChild(i)}}const z=document.getElementById("seasonalActivitySelect"),G=document.getElementById("seasonalDistrictSelect");if(z&&G){const e=PLOTS_GEOJSON.features.filter(t=>t.type==="Seasonal_Event"),o=Array.from(new Set(e.map(t=>t.properties.activity))).sort();for(const t of o){const i=document.createElement("option");i.value=t,i.textContent=t,z.appendChild(i)}const n=Array.from(new Set(e.map(t=>t.properties.district))).sort();for(const t of n){const i=document.createElement("option");i.value=t,i.textContent=t,G.appendChild(i)}}Je();function h(e){return Number.isFinite(e)?new Intl.NumberFormat("ar-SA").format(Math.round(e))+" Ù…Â²":"0 Ù…Â²"}function De(e){const o=e.length,n=e.reduce((a,l)=>a+(l.properties.area||0),0),t=e.filter(a=>a.properties.projectType==="ÙƒØ¨Ø±Ù‰").length,i=e.filter(a=>a.properties.projectType==="Ù…ØªÙˆØ³Ø·Ø©").length;return{count:o,totalArea:n,investmentCount:t,mediumProjectCount:i}}function ze(e){const o=e.properties.projectType;let n,t;return o==="ÙƒØ¨Ø±Ù‰"?(n="#dc3545",t="#a71d2a"):o==="Ù…ØªÙˆØ³Ø·Ø©"?(n="#ffc107",t="#d39e00"):(n="#28a745",t="#1e7e34"),e.properties.type==="Seasonal_Event"?(n="#9C27B0",t="#7B1FA2"):e.properties.type==="Temporary_Leasing"&&(n="#FF9800",t="#E65100"),{color:t,weight:2,dashArray:null,fillColor:n,fillOpacity:.6,className:`plot-shape ${o==="ÙƒØ¨Ø±Ù‰"?"large":"small"}`}}j&&j.addEventListener("click",()=>{j.style.display="none",document.getElementById("map").classList.remove("map-mini")}),document.getElementById("map").addEventListener("click",()=>{j&&j.style.display==="flex"&&(j.style.display="none",document.getElementById("map").classList.remove("map-mini"))});const ce=document.getElementById("whatsappShareBtn");ce&&ce.addEventListener("click",e=>{e.stopPropagation();const n=document.getElementById("viewerImg").src,t=I?I._featureData.properties:null;if(n){let i=`ðŸ—ï¸ ÙØ±ØµØ© Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© 

`;t&&(i+=`ðŸ“ ${t.name||"Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶"}
`,i+=`ðŸ¢ Ø§Ù„Ù†Ø´Ø§Ø·: ${t.activity||"-"}
`,i+=`ðŸ“ Ø§Ù„Ø­ÙŠ: ${t.district||"-"}
`,i+=`ðŸ“ Ø§Ù„Ù…Ø³Ø§Ø­Ø©: ${h(t.area)}
`,i+=`ðŸ—ï¸ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${t.projectType||"-"}
`,t.plotNumber&&(i+=`ðŸ”¢ Ø±Ù‚Ù… Ø§Ù„ÙØ±ØµØ©: ${t.plotNumber}
`)),i+=`
ðŸ“¸ ØµÙˆØ±Ø© Ø§Ù„ÙØ±ØµØ©: ${n}
`,i+=`
ðŸŒ Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„ØµÙˆØ± Ø§Ù„ÙƒØ§Ù…Ù„Ø©: `,i+="https://m-a-wahab.github.io/Investment-Map---Cityscape-2025/";const l=`https://wa.me/?text=${encodeURIComponent(i)}`;window.open(l,"_blank")}});function Y(){return{type:"FeatureCollection",features:PLOTS_GEOJSON.features.filter(o=>{if(o.type==="Temporary_Leasing"||o.type==="Seasonal_Event")return!1;const n=o.properties;if(r.district!=="all"&&n.district!==r.district||r.activity!=="all"&&n.activity!==r.activity||r.projectType!=="all"&&n.projectType!==r.projectType)return!1;const t=n.area||0;return!(r.minArea!=null&&t<r.minArea||r.maxArea!=null&&t>r.maxArea||r.within2026&&!n.within2026Calender)})}}let H={district:"all",activity:"all"};function Ge(){return{type:"FeatureCollection",features:PLOTS_GEOJSON.features.filter(o=>{if(o.type!=="Temporary_Leasing")return!1;const n=o.properties;return!(H.district!=="all"&&n.district!==H.district||H.activity!=="all"&&n.activity!==H.activity)})}}let O={district:"all",activity:"all"};function Re(){return{type:"FeatureCollection",features:PLOTS_GEOJSON.features.filter(o=>{if(o.type!=="Seasonal_Event")return!1;const n=o.properties;return!(O.district!=="all"&&n.district!==O.district||O.activity!=="all"&&n.activity!==O.activity)})}}function J(e){p&&p.length&&p.forEach(t=>t.setMap(null)),p=[],Fe();const o=new google.maps.LatLngBounds;console.log("=== RENDER PLOTS DEBUG ==="),console.log("Total features to render:",e.features.length),console.log("Sample feature:",e.features[0]);let n=0;e.features.forEach((t,i)=>{if(!t.geometry||!t.geometry.coordinates){console.warn("Feature missing geometry:",i);return}const a=t.properties,l=ze(t);if(t.geometry.type==="Point"){let Qe=function(Q){const m=Q,_=document.getElementById("infoRouteLine"),Ae=document.getElementById("infoRoute");if(m.type==="Temporary_Leasing"||m.type==="Seasonal_Event"){const B=m.type==="Seasonal_Event"?"ÙØ§Ø¹Ù„ÙŠØ© Ù…ÙˆØ³Ù…ÙŠØ©":"Ù…ÙˆÙ‚Ø¹ ØªØ£Ø¬ÙŠØ± Ù…Ø¤Ù‚Øª";W.textContent=m.name||B,A.parentElement.querySelector("span").textContent="Ø§Ù„Ø§Ø³Ù…",A.textContent=m.name||"-",F.textContent=m.district||"-",P.textContent=h(m.area),x.parentElement.querySelector("span").textContent="Ø§Ù„Ù†Ø´Ø§Ø·",x.textContent=m.activity||"-",_&&(_.style.display="",Ae&&(Ae.textContent=m.routeName||"-"));const k=document.getElementById("infoStatus");k.parentElement.querySelector("span").textContent="Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª",k.textContent=m.notes||"-",k.style.whiteSpace="pre-wrap",k.style.fontSize="11px",k.style.lineHeight="1.4"}else{W.textContent=m.name||"Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",A.parentElement.querySelector("span").textContent="Ø±Ù‚Ù… Ø§Ù„ÙØ±ØµØ©",A.textContent=m.plotNumber||"-",x.parentElement.querySelector("span").textContent="Ø§Ù„Ù†Ø´Ø§Ø·",x.textContent=m.activity||"-",F.textContent=m.district||"-",P.parentElement.querySelector("span").textContent="Ø§Ù„Ù…Ø³Ø§Ø­Ø©",P.textContent=h(m.area),_&&(_.style.display="none");const B=document.getElementById("infoStatus");B.parentElement.querySelector("span").textContent="Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹",B.textContent=m.projectType||"-",B.style.whiteSpace="normal",B.style.fontSize="inherit",B.style.lineHeight="inherit"}};const[c,M]=t.geometry.coordinates,C={lat:M,lng:c};let y,f={width:40,height:50};t.type==="Temporary_Leasing"?(y="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNTUiIHZpZXdCb3g9IjAgMCA0NSA1NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxmaWx0ZXIgaWQ9Imdsb3ciIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiPgo8ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUdyYXBoaWMiIHN0ZERldmlhdGlvbj0iMyIvPgo8ZmVDb21wb3NpdGUgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmx1ciIgb3BlcmF0b3I9ImluIi8+CjwvZmlsdGVyPgo8L2RlZnM+CjxwYXRoIGQ9Ik0yMi41IDQ1QzEzLjUgMzEuNSA0LjUgMjIuNSA0LjUgMTMuNUM0LjUgNS41IDEzLjUgMC41IDIyLjUgMC41QzMxLjUgMC41IDQwLjUgNS41IDQwLjUgMTMuNUM0MC41IDIyLjUgMzEuNSAzMS41IDIyLjUgNDVaIiBmaWxsPSIjRkY5ODAwIiBzdHJva2U9IiNFNjUxMDAiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI2dsb3cpIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI3IiBmaWxsPSIjRTY1MTAwIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI0IiBmaWxsPSIjZmZmZmZmIi8+Cjwvc3ZnPg==",f={width:45,height:55}):t.type==="Seasonal_Event"?(y="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNTUiIHZpZXdCb3g9IjAgMCA0NSA1NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxmaWx0ZXIgaWQ9Imdsb3ciIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiPgo8ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUdyYXBoaWMiIHN0ZERldmlhdGlvbj0iMyIvPgo8ZmVDb21wb3NpdGUgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmx1ciIgb3BlcmF0b3I9ImluIi8+CjwvZmlsdGVyPgo8L2RlZnM+CjxwYXRoIGQ9Ik0yMi41IDQ1QzEzLjUgMzEuNSA0LjUgMjIuNSA0LjUgMTMuNUM0LjUgNS41IDEzLjUgMC41IDIyLjUgMC41QzMxLjUgMC41IDQwLjUgNS41IDQwLjUgMTMuNUM0MC41IDIyLjUgMzEuNSAzMS41IDIyLjUgNDVaIiBmaWxsPSIjOUMyN0IwIiBzdHJva2U9IiM3QjFGQTIiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI2dsb3cpIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI3IiBmaWxsPSIjN0IxRkEyIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI0IiBmaWxsPSIjZmZmZmZmIi8+Cjwvc3ZnPg==",f={width:45,height:55}):a.projectType==="ÙƒØ¨Ø±Ù‰"?(y="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNTUiIHZpZXdCb3g9IjAgMCA0NSA1NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxmaWx0ZXIgaWQ9Imdsb3ciIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiPgo8ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUdyYXBoaWMiIHN0ZERldmlhdGlvbj0iMyIvPgo8ZmVDb21wb3NpdGUgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmx1ciIgb3BlcmF0b3I9ImluIi8+CjwvZmlsdGVyPgo8L2RlZnM+CjxwYXRoIGQ9Ik0yMi41IDQ1QzEzLjUgMzEuNSA0LjUgMjIuNSA0LjUgMTMuNUM0LjUgNS41IDEzLjUgMC41IDIyLjUgMC41QzMxLjUgMC41IDQwLjUgNS41IDQwLjUgMTMuNUM0MC41IDIyLjUgMzEuNSAzMS41IDIyLjUgNDVaIiBmaWxsPSIjMkU4NkFCIiBzdHJva2U9IiMyMDY0QTgiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI2dsb3cpIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI3IiBmaWxsPSIjMjA2NEE4Ii8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI0IiBmaWxsPSIjZmZmZmZmIi8+Cjwvc3ZnPg==",f={width:45,height:55}):a.projectType==="Ù…ØªÙˆØ³Ø·Ø©"?(y="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNTUiIHZpZXdCb3g9IjAgMCA0NSA1NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxmaWx0ZXIgaWQ9Imdsb3ciIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiPgo8ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUdyYXBoaWMiIHN0ZERldmlhdGlvbj0iMyIvPgo8ZmVDb21wb3NpdGUgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmx1ciIgb3BlcmF0b3I9ImluIi8+CjwvZmlsdGVyPgo8L2RlZnM+CjxwYXRoIGQ9Ik0yMi41IDQ1QzEzLjUgMzEuNSA0LjUgMjIuNSA0LjUgMTMuNUM0LjUgNS41IDEzLjUgMC41IDIyLjUgMC41QzMxLjUgMC41IDQwLjUgNS41IDQwLjUgMTMuNUM0MC41IDIyLjUgMzEuNSAzMS41IDIyLjUgNDVaIiBmaWxsPSIjRjc3RjAwIiBzdHJva2U9IiNEMUQ1MDAiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI2dsb3cpIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI3IiBmaWxsPSIjRDFENTAwIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI0IiBmaWxsPSIjZmZmZmZmIi8+Cjwvc3ZnPg==",f={width:45,height:55}):(y="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNTUiIHZpZXdCb3g9IjAgMCA0NSA1NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxmaWx0ZXIgaWQ9Imdsb3ciIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiPgo8ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUdyYXBoaWMiIHN0ZERldmlhdGlvbj0iMyIvPgo8ZmVDb21wb3NpdGUgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmx1ciIgb3BlcmF0b3I9ImluIi8+CjwvZmlsdGVyPgo8L2RlZnM+CjxwYXRoIGQ9Ik0yMi41IDQ1QzEzLjUgMzEuNSA0LjUgMjIuNSA0LjUgMTMuNUM0LjUgNS41IDEzLjUgMC41IDIyLjUgMC41QzMxLjUgMC41IDQwLjUgNS41IDQwLjUgMTMuNUM0MC41IDIyLjUgMzEuNSAzMS41IDIyLjUgNDVaIiBmaWxsPSIjMjhhNzQ1IiBzdHJva2U9IiMxZTdlMzQiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI2dsb3cpIi8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI3IiBmaWxsPSIjMWU3ZTM0Ii8+CjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxMy41IiByPSI0IiBmaWxsPSIjZmZmZmZmIi8+Cjwvc3ZnPg==",f={width:45,height:55});const Z={position:C,map:s,title:a.name||"Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",animation:google.maps.Animation.DROP};Z.icon={url:y,scaledSize:new google.maps.Size(f.width,f.height),anchor:new google.maps.Point(f.width/2,f.height)};const g=new google.maps.Marker(Z);g._featureData=t,o.extend(C),g.addListener("mouseover",()=>{I!==g&&(g.setAnimation(google.maps.Animation.BOUNCE),setTimeout(()=>{I!==g&&g.setAnimation(null)},700))}),g.addListener("click",()=>{I&&I!==g&&we(I),I=g,Ne(g),Qe(a),N&&(N.innerHTML="",(a.images||[]).slice(0,6).forEach(Q=>{const m=document.createElement("img");m.src=Q,m.alt=a.name||"ØµÙˆØ±Ø© Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",m.style.cursor="zoom-in",m.addEventListener("click",()=>{T&&j&&(T.src=Q,j.style.display="flex",document.getElementById("map").classList.add("map-mini"))}),N.appendChild(m)})),s.setCenter(C),s.setZoom(15),g.setAnimation(google.maps.Animation.BOUNCE),de(g,()=>{setTimeout(()=>{I===g&&g.setAnimation(null)},1e3)})}),p.push(g),n++}else if(t.geometry.type==="Polygon"||t.geometry.type==="MultiPolygon"){let c=[];t.geometry.type==="Polygon"?c=[t.geometry.coordinates[0]]:c=t.geometry.coordinates.map(M=>M[0]),c.forEach(M=>{const C=M.map(f=>({lat:f[1],lng:f[0]}));if(C.length<3)return;const y=new google.maps.Polygon({paths:C,strokeColor:l.color,strokeOpacity:1,strokeWeight:l.weight,fillColor:l.fillColor,fillOpacity:l.fillOpacity,map:s});C.forEach(f=>o.extend(f)),y.addListener("click",()=>{W.textContent=a.name||"Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",A.textContent=a.plotNumber||"-",x.textContent=a.activity||"-",F.textContent=a.district||"-",P.textContent=h(a.area),document.getElementById("infoStatus").textContent=a.projectType||"-",N&&(N.innerHTML="",(a.images||[]).slice(0,6).forEach(Z=>{const g=document.createElement("img");g.src=Z,g.alt=a.name||"ØµÙˆØ±Ø© Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",g.style.cursor="zoom-in",g.addEventListener("click",()=>{T&&j&&(T.src=Z,j.style.display="flex",document.getElementById("map").classList.add("map-mini"))}),N.appendChild(g)}));const f=new google.maps.LatLngBounds;C.forEach(Z=>f.extend(Z)),s.fitBounds(f)}),p.push(y),n++})}}),console.log("Total items created:",n),console.log("Bounds:",o.isEmpty()?"EMPTY":o.toString()),e.features.length>0&&!o.isEmpty()?(s.fitBounds(o),console.log("Map fitted to bounds")):console.warn("No bounds to fit or no features")}function V(){const e=b?Number(b.value):null,o=v?Number(v.value):null;r={district:d.value,activity:S.value,projectType:U.value,minArea:Number.isFinite(e)?e:null,maxArea:Number.isFinite(o)?o:null,within2026:w?w.checked:!1};const n=Y(),{count:t,investmentCount:i,mediumProjectCount:a}=De(n.features);n.features.length===PLOTS_GEOJSON.features.length?(se.textContent="0",le.textContent="0",re.textContent="0"):(se.textContent=new Intl.NumberFormat("ar-SA").format(t),le.textContent=new Intl.NumberFormat("ar-SA").format(i),re.textContent=new Intl.NumberFormat("ar-SA").format(a)),J(n)}function We(){d.value="all",S.value="all",U.value="all",w&&(w.checked=!1),E.querySelectorAll(".seg").forEach(e=>e.classList.remove("active")),b.value="0",v.value="5000000",R&&(R.value=""),X&&(X.style.display="none"),V(),setTimeout(()=>{s.panTo({lat:window.ARAR_CENTER[0],lng:window.ARAR_CENTER[1]}),s.setZoom(13),console.log("Zooming to Arar city")},300)}function Fe(){W.textContent="Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",A.textContent="-",x.textContent="-",F.textContent="-",P.textContent=h(0),N.innerHTML="",document.getElementById("infoStatus").textContent="-"}function de(e,o){const n=document.getElementById("infoCard");n.classList.remove("card-appear","card-glow","card-attention"),n.style.position="absolute",n.style.left="auto",n.style.top="16px",n.style.right="16px",n.style.opacity="1",n.style.transform="scale(1)",n.style.filter="blur(0px)",n.style.transition="none",n.style.display="block",n.offsetHeight,n.classList.add("card-attention"),setTimeout(()=>{n.classList.remove("card-attention"),o&&o()},800)}Be.addEventListener("click",V),Ue.addEventListener("click",We),w&&w.addEventListener("change",V);const me=document.getElementById("applyLeasingFilters"),Ie=document.getElementById("resetLeasingFilters"),ge=document.getElementById("statLeasingCount"),ue=document.getElementById("statLeasingArea"),pe=document.getElementById("statLeasingActivities");function ye(){H={district:D?D.value:"all",activity:L?L.value:"all"};const e=Ge(),o=e.features.length,n=e.features.reduce((i,a)=>i+(a.properties.area||0),0),t=new Set(e.features.map(i=>i.properties.activity)).size;ge&&(ge.textContent=new Intl.NumberFormat("ar-SA").format(o)),ue&&(ue.textContent=h(n)),pe&&(pe.textContent=new Intl.NumberFormat("ar-SA").format(t)),J(e)}function He(){D&&(D.value="all"),L&&(L.value="all"),ye(),setTimeout(()=>{s.panTo({lat:window.ARAR_CENTER[0],lng:window.ARAR_CENTER[1]}),s.setZoom(13)},300)}me&&me.addEventListener("click",ye),Ie&&Ie.addEventListener("click",He);const fe=document.getElementById("applySeasonalFilters"),Ce=document.getElementById("resetSeasonalFilters"),Me=document.getElementById("statSeasonalCount"),Se=document.getElementById("statSeasonalArea"),je=document.getElementById("statSeasonalActivities");function Ee(){O={district:G?G.value:"all",activity:z?z.value:"all"};const e=Re(),o=e.features.length,n=e.features.reduce((i,a)=>i+(a.properties.area||0),0),t=new Set(e.features.map(i=>i.properties.activity)).size;Me&&(Me.textContent=new Intl.NumberFormat("ar-SA").format(o)),Se&&(Se.textContent=h(n)),je&&(je.textContent=new Intl.NumberFormat("ar-SA").format(t)),J(e)}function Oe(){G&&(G.value="all"),z&&(z.value="all"),Ee(),setTimeout(()=>{s.panTo({lat:window.ARAR_CENTER[0],lng:window.ARAR_CENTER[1]}),s.setZoom(13)},300)}fe&&fe.addEventListener("click",Ee),Ce&&Ce.addEventListener("click",Oe),E.addEventListener("click",e=>{const o=e.target.closest(".seg");if(!o)return;E.querySelectorAll(".seg").forEach(t=>t.classList.remove("active")),o.classList.add("active");const n=o.getAttribute("data-type");n&&(U.value=n)});function q(){ee&&(ee.textContent=new Intl.NumberFormat("ar-SA").format(Number(b.value))),te&&(te.textContent=new Intl.NumberFormat("ar-SA").format(Number(v.value)))}b&&v&&(b.addEventListener("input",()=>{Number(b.value)>Number(v.value)&&(v.value=b.value),q()}),v.addEventListener("input",()=>{Number(v.value)<Number(b.value)&&(b.value=v.value),q()}),q());let K=null,$=null;const X=document.getElementById("districtCharts");function ke(e){if(e==="all"){X.style.display="none";return}X.style.display="block";const o=PLOTS_GEOJSON.features.filter(l=>l.properties.district===e);console.log("District charts for:",e,"Found plots:",o.length);const n={};o.forEach(l=>{const c=l.properties.projectType||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";n[c]=(n[c]||0)+1});const t={};o.forEach(l=>{const c=l.properties.activity||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";t[c]=(t[c]||0)+1}),K&&K.destroy(),$&&$.destroy();const i=document.getElementById("investmentChart");if(i){const l=Object.keys(n),c=Object.values(n);K=new Chart(i,{type:"doughnut",data:{labels:l,datasets:[{data:c,backgroundColor:["rgba(0, 168, 107, 0.8)","rgba(215, 183, 122, 0.8)","rgba(167, 184, 177, 0.8)"],borderColor:["#00a86b","#d7b77a","#a7b8b1"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom",labels:{color:"#e8f1ed",font:{family:"Tajawal",size:12},padding:10}},tooltip:{backgroundColor:"rgba(12, 20, 18, 0.95)",titleColor:"#e8f1ed",bodyColor:"#e8f1ed",borderColor:"rgba(255, 255, 255, 0.12)",borderWidth:1,padding:12,titleFont:{family:"Tajawal",size:14},bodyFont:{family:"Tajawal",size:13}}}}})}const a=document.getElementById("projectTypeChart");if(a){const l=Object.keys(t),c=Object.values(t);$=new Chart(a,{type:"bar",data:{labels:l,datasets:[{label:"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹",data:c,backgroundColor:"rgba(215, 183, 122, 0.7)",borderColor:"#d7b77a",borderWidth:2,borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0,ticks:{color:"#a7b8b1",font:{family:"Tajawal",size:11},stepSize:1},grid:{color:"rgba(255, 255, 255, 0.06)"}},x:{ticks:{color:"#a7b8b1",font:{family:"Tajawal",size:11}},grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(12, 20, 18, 0.95)",titleColor:"#e8f1ed",bodyColor:"#e8f1ed",borderColor:"rgba(255, 255, 255, 0.12)",borderWidth:1,padding:12,titleFont:{family:"Tajawal",size:14},bodyFont:{family:"Tajawal",size:13}}}}})}}d.addEventListener("change",e=>{ke(e.target.value)});function Je(){const e=PLOTS_GEOJSON.features,o=e.length,n=e.filter(a=>(a.type==="Feature"||!a.type)&&a.properties.within2026Calender===!0).length,t=e.filter(a=>a.type==="Temporary_Leasing").length,i=e.filter(a=>a.type==="Seasonal_Event").length;ne&&(ne.textContent=new Intl.NumberFormat("ar-SA").format(o)),oe&&(oe.textContent=new Intl.NumberFormat("ar-SA").format(n)),ie&&(ie.textContent=new Intl.NumberFormat("ar-SA").format(t)),ae&&(ae.textContent=new Intl.NumberFormat("ar-SA").format(i))}const be=document.getElementById("recenterBtn");be&&be.addEventListener("click",()=>{s.panTo({lat:u[0],lng:u[1]}),s.setZoom(13)});const ve=document.getElementById("fullscreenBtn");ve&&ve.addEventListener("click",()=>{const e=document.getElementById("map");document.fullscreenElement?document.exitFullscreen().then(()=>{setTimeout(()=>s.invalidateSize(),100)}):e.requestFullscreen().then(()=>{setTimeout(()=>s.invalidateSize(),100)})});function Ne(e){e._originalIcon||(e._originalIcon=e.getIcon());const o={url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCA2MCA3MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxmaWx0ZXIgaWQ9InNlbGVjdGVkR2xvdyIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSI+CjxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlR3JhcGhpYyIgc3RkRGV2aWF0aW9uPSI0Ii8+CjxmZUNvbXBvc2l0ZSBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCbHVyIiBvcGVyYXRvcj0iaW4iLz4KPC9maWx0ZXI+CjxsaW5lYXJHcmFkaWVudCBpZD0ic2VsZWN0ZWRHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjZiNmIiLz4KPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmYzMzMzIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHBhdGggZD0iTTMwIDU1QzE4IDQzIDYgMzAgNiAxOC41QzYgOC41IDE4IDIgMzAgMkM0MiAyIDU0IDguNSA1NCAxOC41QzU0IDMwIDQyIDQzIDMwIDU1WiIgZmlsbD0idXJsKCNzZWxlY3RlZEdyYWRpZW50KSIgc3Ryb2tlPSIjZmYzMzMzIiBzdHJva2Utd2lkdGg9IjMiIGZpbHRlcj0idXJsKCNzZWxlY3RlZEdsb3cpIi8+CjxjaXJjbGUgY3g9IjMwIiBjeT0iMTcuNSIgcj0iOCIgZmlsbD0iI2ZmMzMzMyIvPgo8Y2lyY2xlIGN4PSIzMCIgY3k9IjE3LjUiIHI9IjQiIGZpbGw9IiNmZmZmZmYiLz4KPGNpcmNsZSBjeD0iMzAiIGN5PSIxNy41IiByPSIxLjUiIGZpbGw9IiNmZjMzMzMiLz4KPC9zdmc+",scaledSize:new google.maps.Size(60,70),anchor:new google.maps.Point(30,70)};e.setIcon(o),e.setZIndex(google.maps.Marker.MAX_ZINDEX+1)}function we(e){e._originalIcon&&(e.setIcon(e._originalIcon),e.setZIndex(null))}const R=document.getElementById("searchInput"),Le=document.getElementById("searchBtn");function he(e){if(!e)return;const n=Y().features;console.log("Searching in",n.length,"filtered plots for:",e);const t=e.toLowerCase(),i=n.find(l=>{const c=l.properties;return c.name&&c.name.toLowerCase().includes(t)||c.plotNumber&&c.plotNumber.toLowerCase().includes(t)||c.district&&c.district.toLowerCase().includes(t)||c.activity&&c.activity.toLowerCase().includes(t)});if(!i){alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬");return}const a=PLOTS_GEOJSON.features.findIndex(l=>l.properties.name===i.properties.name&&l.properties.plotNumber===i.properties.plotNumber&&l.properties.district===i.properties.district);if(a!==-1&&p&&p[a]){const l=p[a],c=i;I&&I!==l&&we(I),I=l,Ne(l);const M=c.properties;if(W.textContent=M.name||"Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",A.textContent=M.plotNumber||"-",x.textContent=M.activity||"-",F.textContent=M.district||"-",P.textContent=h(M.area),document.getElementById("infoStatus").textContent=M.projectType||"-",N&&(N.innerHTML="",(M.images||[]).slice(0,6).forEach(C=>{const y=document.createElement("img");y.src=C,y.alt=M.name||"ØµÙˆØ±Ø© Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶",y.style.cursor="zoom-in",y.addEventListener("click",()=>{T&&j&&(T.src=C,j.style.display="flex",document.getElementById("map").classList.add("map-mini"))}),N.appendChild(y)})),c.geometry.type==="Point"){const C=l.getPosition();s.setCenter(C),s.setZoom(16),l.setAnimation(google.maps.Animation.BOUNCE),de(l,()=>{setTimeout(()=>{I===l&&l.setAnimation(null)},1e3)})}else{const C=new google.maps.LatLngBounds;l.getPath().forEach(y=>C.extend(y)),s.fitBounds(C),s.setZoom(Math.min(s.getZoom(),16)),document.getElementById("infoCard").style.display="block"}}else alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬")}Le&&Le.addEventListener("click",()=>{he(R.value)}),R&&R.addEventListener("keypress",e=>{e.key==="Enter"&&he(R.value)});const Xe=Y();J(Xe)}window.googleMapsReady||window.google&&window.google.maps?xe():window.initMap=xe;function _e(u){const s=parseInt(u.getAttribute("data-target")),p=2e3,I=0,r=s/(p/16);let d=I;const S=setInterval(()=>{d+=r,d>=s?(u.textContent=s.toLocaleString("ar-SA"),clearInterval(S)):u.textContent=Math.floor(d).toLocaleString("ar-SA")},16)}window.addEventListener("DOMContentLoaded",()=>{if(typeof PLOTS_GEOJSON<"u"&&PLOTS_GEOJSON.features){const u=PLOTS_GEOJSON.features,s=u.length,p=u.filter(E=>(E.type==="Feature"||!E.type)&&E.properties.within2026Calender===!0).length,I=u.filter(E=>E.type==="Temporary_Leasing").length,r=u.filter(E=>E.type==="Seasonal_Event").length,d=document.getElementById("splashStatTotal"),S=document.getElementById("splashStat2026"),w=document.getElementById("splashStatLeasing"),U=document.getElementById("splashStatSeasonal");d&&d.setAttribute("data-target",s),S&&S.setAttribute("data-target",p),w&&w.setAttribute("data-target",I),U&&U.setAttribute("data-target",r)}setTimeout(()=>{document.querySelectorAll(".stat-number").forEach(s=>_e(s))},1e3)});function Ze(){const u=document.getElementById("splashScreen"),s=document.getElementById("mainApp");u.classList.add("fade-out"),setTimeout(()=>{u.style.display="none",s.style.display="block",setTimeout(()=>{window.investmentMap&&window.ARAR_CENTER&&typeof google<"u"&&(google.maps.event.trigger(window.investmentMap,"resize"),console.log("Map resized"),window.investmentMap.setZoom(11),setTimeout(()=>{window.investmentMap.panTo({lat:window.ARAR_CENTER[0],lng:window.ARAR_CENTER[1]}),window.investmentMap.setZoom(13),console.log("Zooming to Arar city")},100))},200),setTimeout(()=>{window.investmentMap&&typeof google<"u"&&google.maps.event.trigger(window.investmentMap,"resize")},500),setTimeout(()=>{window.investmentMap&&typeof google<"u"&&google.maps.event.trigger(window.investmentMap,"resize")},1e3)},500)}window.location.search.includes("skip")&&document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{Ze()},100)});window.enterApp=Ze;
